

<app-side-nav (isShowNav)="handleSideBar($event)"></app-side-nav>
<div class="container-fluid " [ngStyle]="{'padding-left' : isShowPadding ? '280px' : '100px'}">
    <form [formGroup]="salesFormGroup" (ngSubmit)="submitData()">
        <h3 class="mt-2">
            <mat-icon class="back" routerLink="/sales/sales-order-list/">arrow_back</mat-icon> Sales Order
        </h3>
        <div class="row border">
            <div class="col-6">
                <span class="">Order Type</span>
                <select class="form-select " aria-label="Default select example" formControlName="orderType">
                    <option [selected]="salesFormGroup.value.orderType === ''" value="" hidden>Select Order Type</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Sales Org</span>
                <select class="form-select " aria-label="Default select example" formControlName="saleOrgName">
                    <option [selected]="salesFormGroup.value.saleOrgName === ''" value="" hidden>Select Sales Org</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Distribution Channel</span>
                <select class="form-select " aria-label="Default select example" formControlName="distributionChannelsName">
                    <option [selected]="salesFormGroup.value.distributionChannelsName === ''" value="" hidden>Select Distribution Channel</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            
            <div class="col-6">
                <span class="">Division</span>
                <select class="form-select " aria-label="Default select example" formControlName="divisionName">
                    <!-- <option [selected]="salesFormGroupFormGroup.value.divisionId=== ''" value="" hidden>Select Division</option> -->
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Customer Id</span>
                <select class="form-select " aria-label="Default select example" formControlName="customerId">
                    <option [selected]="salesFormGroup.value.customerId=== ''" value="" hidden>Select Customer Id</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Customer Address</span>
                <select class="form-select " aria-label="Default select example" formControlName="customerAddress">
                    <option [selected]="salesFormGroup.value.customerAddress=== ''" value="" hidden>Select Customer Add</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
                <div
                    *ngIf="salesFormGroup.controls['customerAddress'].touched && salesFormGroup.controls['customerAddress'].touched && salesFormGroup.controls['customerAddress'].hasError('required') && !isSubmitted">
                    <p class="error-message">Customer Address is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['customerAddress'].hasError('required')">
                    <p class="error-message">Customer Address is mandatory</p>
                </div>
            </div>

            <div class="col-6">
                <label >Sales Order <sup>*</sup></label>
                <input type="text" class="form-control " placeholder="Enter Sales Order" formControlName="saleOrder">
                <div
                    *ngIf="salesFormGroup.controls['saleOrder'].touched && salesFormGroup.controls['saleOrder'].touched && salesFormGroup.controls['saleOrder'].hasError('required') && !isSubmitted">
                    <p class="error-message">Sale Order is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['saleOrder'].hasError('required')">
                    <p class="error-message">Sale Order is mandatory</p>
                </div>
            </div>
            <div class="col-6">
                <label class="">Customer PO <sup>*</sup></label>
                <input type="text" class="form-control " placeholder="Enter Customer PO" formControlName="customerPo">
                <div
                    *ngIf="salesFormGroup.controls['customerPo'].touched && salesFormGroup.controls['customerPo'].touched && salesFormGroup.controls['customerPo'].hasError('required') && !isSubmitted">
                    <p class="error-message">Customer PO is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['customerPo'].hasError('required')">
                    <p class="error-message">Customer PO is mandatory</p>
                </div>
            </div>

            <div class="col-6">
                <label class="">Customer PO Date <sup>*</sup></label>
                <input type="date" class="form-control " placeholder="Enter PO Date" formControlName="customerPoDate">
                <div
                    *ngIf="salesFormGroup.controls['customerPoDate'].touched && salesFormGroup.controls['customerPoDate'].touched && salesFormGroup.controls['customerPoDate'].hasError('required') && !isSubmitted">
                    <p class="error-message">Customer PO Date is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['customerPoDate'].hasError('required')">
                    <p class="error-message">PO Date is mandatory</p>
                </div>
            </div>
            <div class="col-6">
                <label class="">Req Delivery Date <sup>*</sup></label>
                <input type="date" class="form-control " placeholder="Enter Req Delivery Date"
                    formControlName="requestedDeliveryDate">
                <div
                    *ngIf="salesFormGroup.controls['requestedDeliveryDate'].touched && salesFormGroup.controls['requestedDeliveryDate'].touched && salesFormGroup.controls['requestedDeliveryDate'].hasError('required') && !isSubmitted">
                    <p class="error-message">Req Delivery Date is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['requestedDeliveryDate'].hasError('required')">
                    <p class="error-message">Req Delivery Date is mandatory</p>
                </div>
            </div>
            <div class="col-6">
                <span class="">Company Currency</span>
                <select class="form-select " aria-label="Default select example" formControlName="companyCurrency">
                    <option [selected]="salesFormGroup.value.companyCurrency=== ''" value="" hidden>Select Company Currency</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Transaction Currency</span>
                <select class="form-select " aria-label="Default select example" formControlName="transactionCurrency">
                    <option [selected]="salesFormGroup.value.transactionCurrency=== ''" value="" hidden>Select Transaction Currency</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class=""> Text</span>
                <input type="text" class="form-control " placeholder=" Enter Text" formControlName="text">
            </div>
            <div class="col-6">
                <span class="">Order Status</span>
                <select class="form-select " aria-label="Default select example" formControlName="orderStatus">
                    <option [selected]="salesFormGroup.value.orderStatus === ''" value="" hidden>Select Order Status</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
                <div
                    *ngIf="salesFormGroup.controls['orderStatus'].touched && salesFormGroup.controls['orderStatus'].touched && salesFormGroup.controls['orderStatus'].hasError('required') && !isSubmitted">
                    <p class="error-message">Order Status is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['orderStatus'].hasError('required')">
                    <p class="error-message">Order Status is mandatory</p>
                </div>
            </div>


            <div class="col-6">
                <span class="">Exchange Rate</span>
                <input type="text" class="form-control " placeholder="Enter Exchange Rate" formControlName="exchangeRate">
            </div>
            <div class="col-6">
                <span class="">Mode of Transport</span>
                <select class="form-select " aria-label="Default select example" formControlName="modeOfTransport">
                    <option [selected]="salesFormGroup.value.modeOfTransport=== ''" value="" hidden>Select Mode of Transport</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Total Net Weight</span>
                <input type="text" class="form-control " placeholder="Calculated Total Net Weight"
                    formControlName="totalNetWeight">
            </div>
            <div class="col-6">
                <span class="">Total Gross Wt</span>
                <input type="text" class="form-control " placeholder="Calculated Total Gross Wt"
                    formControlName="totalGrossWeight">
            </div>
            <div class="col-6">
                <span class="">Total Volume</span>
                <input type="text" class="form-control " placeholder="Calculated Total Volume" formControlName="totalVolume">
            </div>
            <div class="col-6">
                <span class="">Payment Term</span>
                <select class="form-select " aria-label="Default select example" formControlName="paymentTerms">
                    <option [selected]="salesFormGroup.value.paymentTerms === ''" value="" hidden>Select Payment Term</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Billing Block</span>
                <select class="form-select " aria-label="Default select example" formControlName="billingBlockName">
                    <option [selected]="salesFormGroup.value.billingBlockId=== ''" value="" hidden>Select Billing Block</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Company Code</span>
                <select class="form-select " aria-label="Default select example" formControlName="companyCodeId">
                    <option [selected]="salesFormGroup.value.companyCodeId === ''" value="" hidden>Select Company Code</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="col-6">
                <span class="">Customer Account</span>
                <select class="form-select " aria-label="Default select example" formControlName="customerAcctAss">
                    <option [selected]="salesFormGroup.value.customerAcctAss === ''" value="" hidden>Select Customer Account</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
                <div
                    *ngIf="salesFormGroup.controls['customerAcctAss'].touched && salesFormGroup.controls['customerAcctAss'].touched && salesFormGroup.controls['customerAcctAss'].hasError('required') && !isSubmitted">
                    <p class="error-message">Customer Account is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['customerAcctAss'].hasError('required')">
                    <p class="error-message">Customer Account is mandatory</p>
                </div>
            </div>


            <div class="col-6">
                <label class="">Net Price <sup>*</sup></label>
                <input type="number" class="form-control " placeholder="Enter Net Price" formControlName="netPrice">
                <div
                    *ngIf="salesFormGroup.controls['netPrice'].touched && salesFormGroup.controls['netPrice'].touched && salesFormGroup.controls['netPrice'].hasError('required') && !isSubmitted">
                    <p class="error-message">Net Price is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['netPrice'].hasError('required')">
                    <p class="error-message">Net Price is mandatory</p>
                </div>

            </div>
            <div class="col-6">
                <label class="">Net Tax <sup>*</sup></label>
                <input type="number" class="form-control " placeholder="Enter Net Tax" formControlName="netTax">
                <div
                    *ngIf="salesFormGroup.controls['netTax'].touched && salesFormGroup.controls['netTax'].touched && salesFormGroup.controls['netTax'].hasError('required') && !isSubmitted">
                    <p class="error-message">Net Tax is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['netTax'].hasError('required')">
                    <p class="error-message">Net Tax is mandatory</p>
                </div>
            </div>

            <div class="col-6">
                <label class="">Net Discount <sup>*</sup></label>
                <input type="number" class="form-control " placeholder="Enter Net Discount"
                    formControlName="netDiscount">
                <div
                    *ngIf="salesFormGroup.controls['netDiscount'].touched && salesFormGroup.controls['netDiscount'].touched && salesFormGroup.controls['netDiscount'].hasError('required') && !isSubmitted">
                    <p class="error-message">Net Discount is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['netDiscount'].hasError('required')">
                    <p class="error-message">Net Discount is mandatory</p>
                </div>
            </div>
            <div class="col-6">
                <label class="">Net Freight <sup>*</sup></label>
                <input type="number" class="form-control " placeholder="enter Net Freight" formControlName="netFreight">
                <div
                    *ngIf="salesFormGroup.controls['netFreight'].touched && salesFormGroup.controls['netFreight'].touched && salesFormGroup.controls['netFreight'].hasError('required') && !isSubmitted">
                    <p class="error-message">Net Freight is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['netFreight'].hasError('required')">
                    <p class="error-message">Net Freight is mandatory</p>
                </div>
            </div>

            <div class="col-6">
                <label class="">Other Charges <sup>*</sup></label>
                <input type="number" class="form-control " placeholder="Other Charges" formControlName="otherCharges">
                <div
                    *ngIf="salesFormGroup.controls['otherCharges'].touched && salesFormGroup.controls['otherCharges'].touched && salesFormGroup.controls['otherCharges'].hasError('required') && !isSubmitted">
                    <p class="error-message">Customer Add is mandatory</p>
                </div>
                <div *ngIf="isSubmitted && salesFormGroup.controls['otherCharges'].hasError('required')">
                    <p class="error-message">Customer Add is mandatory</p>
                </div>
            </div>

        </div>






        <div class="row border mt-2">
            <div class="col-12 ">
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                        <h3 class="py-2">
                            Item Data
                        </h3>
                    </div>
                    <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 d-flex justify-content-end align-items-center">
                        <button class="btn btn-primary" (click)="addSalesItem()">Add</button>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead> 
                            <tr>
                                <th *ngIf="salesOrderArray.controls.length > 1" >Actions</th>
                                <th>Product Id</th>
                                <th>Product Description</th>
                                <th>Order Qty</th>
                                <th>UOM</th>
                                <th>Plant</th>
                                <th>Storage Location</th>
                                <th>Batch/Serial #</th>
                                <th>Price Amount</th>
                                <th>Per Unit Price</th>
                                <th>Pricing Unit</th>
                                <th>Pricing UOM</th>
                                <th>Tax</th>
                                <th>Per Unit Tax</th>
                                <th>Discount</th>
                                <th>Per Unit Discount</th>
                                <th>Freight</th>
                                <th>Per Unit Freight</th>
                                <th>Other Charges</th>
                                <th>Company Currency</th>
                                <th>Transaction Currency</th>
                                <th>Exchange Rate</th>
                                <th>Pricing Date</th>
                                <th>Net Weight</th>
                                <th>Gross Weight</th>
                                <th>Volume</th>
                            </tr>
                        </thead>
                        <tbody formArrayName="financialData">
                            <tr *ngFor="let sales of salesOrderArray.controls; let i = index;"
                                [formGroupName]="i">
                                <td *ngIf="salesOrderArray.controls.length > 1">
                                    <mat-icon style="cursor:pointer"
                                        (click)="deleteSalesItem(i)">delete</mat-icon>
                                </td>
                                <td>
                                    <select class="form-select " aria-label="Default select example" formControlName="proId">
                                        <option [selected]="salesFormGroup.value.proId === ''" value="" hidden>Select Product Id</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Autofetched Product Description"
                                    formControlName="productDescription">
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Oredr Qty" formControlName="ordQty">

                                  
                                </td>
                                <td>
                                    <input type="text" class="form-control " placeholder="Enter UOM" formControlName="uom">

                                </td>
                                <td>
                                    <input type="text" class="form-control " placeholder="Enter Plant" formControlName="plant">

                                </td>
                                <td>
                                    <input type="text" class="form-control " placeholder="Auto Storage Location"
                                    formControlName="stLoc">
                                </td>
                                <td>
                                    <input type="text" class="form-control " placeholder="Enter Batch" formControlName="batch">

                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Enter Price Amount"
                            formControlName="price">
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Enter Per Unit Price"
                            formControlName="perUnit">
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Pricing Unit"
                            formControlName="pricingUnit">
                                </td>
                                <td>
                                    <select class="form-select " aria-label="Default select example" formControlName="priuom">
                                        <option [selected]="salesFormGroup.value.priuom === ''" value="" hidden>Select Pricing UOM</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder=" Enter Tax" formControlName="tax">

                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Per Unit Tax"
                                    formControlName="perUnitTax">
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Discount" formControlName="discount">
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Per Unit Discount"
                                    formControlName="perDis">
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Freight" formControlName="fre">

                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Per Unit Freight"
                            formControlName="perUnitFreight">
                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Other Charges"
                                    formControlName="otherCharge">
                                </td>
                                <td>
                                    <input type="text" class="form-control " placeholder="Auto Company Currency"
                            formControlName="computerCurrency">
                                </td>
                                <td>
                                    <input type="text" class="form-control " placeholder="Auto Transation Currency"
                                    formControlName="transactionCurrency">
                                </td>
                                <td>
                                    <input type="text" class="form-control " placeholder="Exchange Rate"
                                    formControlName="exchangeRate">
                                </td>
                                <td>
                                    <input type="text" class="form-control " placeholder="Exchange Rate"
                                    formControlName="exchangeRate">
                                </td>
                                <td>
                        <input type="number" class="form-control " placeholder="Net Weight" formControlName="netWeight">

                                </td>
                                <td>
                                    <input type="number" class="form-control " placeholder="Gross Weight"
                                    formControlName="groWeight">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="row py-2">
            <div class="col-12 d-flex justify-content-end">
                <button class="btn btn-primary">Save</button>
            </div>
        </div>

