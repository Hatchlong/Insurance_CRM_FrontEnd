<!-- <p>add-product works!</p> -->
<div class="container-fluid">
    <h3 class="mt-2">
        <mat-icon class="back" routerLink="/master/customer-list">arrow_back</mat-icon> Customer Maintainence
    </h3>
    <div class="row">
        <div class="col-12 ">
            <form [formGroup]="general" (ngSubmit)="addAll()">
                <div class="row border">
                    <div class="col-6 py-1">
                        <label for="" class="">Customer Id <sup>*</sup></label>
                        <input type="text" class="form-control " placeholder="Description"
                            formControlName="customerId">
                        <div
                            *ngIf="general.controls['customerId'].touched && general.controls['customerId'].touched && general.controls['customerId'].hasError('required') && !isSubmitted">
                            <p class="error-message">Customer Id is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['customerId'].hasError('required')">
                            <p class="error-message">Customer Id is required</p>
                        </div>
                    </div>
                    <div class="col-6 py-1">
                        <label for="example">Country <sup>*</sup></label>
                        <select class="form-select " aria-label="Default select example" formControlName="country">
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                        <div
                            *ngIf="general.controls['country'].touched && general.controls['country'].touched && general.controls['country'].hasError('required') && !isSubmitted">
                            <p class="error-message">Country is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['country'].hasError('required')">
                            <p class="error-message">Country is required</p>
                        </div>
                    </div>
                    <div class="col-6 py-1">
                        <label for="" class="mt-3">Address <sup>*</sup></label>
                        <input type="text" class="form-control mb-3" placeholder="Address" formControlName="address">
                        <div
                            *ngIf="general.controls['address'].touched && general.controls['address'].touched && general.controls['address'].hasError('required') && !isSubmitted">
                            <p class="error-message">Address is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['address'].hasError('required')">
                            <p class="error-message">Address is required</p>
                        </div>

                    </div>
                    <div class="col-6 py-1">

                        <label for="" class="mt-3">Postal Code <sup>*</sup></label>
                        <input type="text" class="form-control mb-3" placeholder="Enter Postal Code"
                            formControlName="postalCode">
                        <div
                            *ngIf="general.controls['postalCode'].touched && general.controls['postalCode'].touched && general.controls['postalCode'].hasError('required') && !isSubmitted">
                            <p class="error-message">Postal Code is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['postalCode'].hasError('required')">
                            <p class="error-message">Postal Code is required</p>
                        </div>

                    </div>
                    <div class="col-6 py-1">

                        <label for="">City <sup>*</sup></label>
                        <input type="text" class="form-control mb-3" placeholder="City" formControlName="city">
                        <div
                            *ngIf="general.controls['city'].touched && general.controls['city'].touched && general.controls['city'].hasError('required') && !isSubmitted">
                            <p class="error-message">City is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['city'].hasError('required')">
                            <p class="error-message">City is required</p>
                        </div>
                    </div>
                    <div class="col-6 py-1">

                        <label for="">Region <sup>*</sup></label>
                        <input type="text" class="form-control mb-3" placeholder="Region" formControlName="region">
                        <div
                            *ngIf="general.controls['region'].touched && general.controls['region'].touched && general.controls['region'].hasError('required') && !isSubmitted">
                            <p class="error-message">Region is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['region'].hasError('required')">
                            <p class="error-message">Region is required</p>
                        </div>
                    </div>
                    <div class="col-6 py-1">

                        <label for="">Telephone <sup>*</sup></label>
                        <input type="text" class="form-control mb-3" placeholder="Telephone"
                            formControlName="telephone">
                        <div
                            *ngIf="general.controls['telephone'].touched && general.controls['telephone'].touched && general.controls['telephone'].hasError('required') && !isSubmitted">
                            <p class="error-message">Telephone is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['telephone'].hasError('required')">
                            <p class="error-message">Telephone is required</p>
                        </div>

                    </div>
                    <div class="col-6 py-1">
                        <label for="">Tax No 1 <sup>*</sup></label>
                        <input type="text" class="form-control mb-3" placeholder="Tax Number 1"
                            formControlName="taxOne">
                        <div
                            *ngIf="general.controls['taxOne'].touched && general.controls['taxOne'].touched && general.controls['taxOne'].hasError('required') && !isSubmitted">
                            <p class="error-message">Tax No 1 is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['taxOne'].hasError('required')">
                            <p class="error-message">Tax No 1 is required</p>
                        </div>

                    </div>
                    <div class="col-6 py-1">

                        <label for="">Tax NO 2 <sup>*</sup></label>
                        <input type="text" class="form-control mb-3" placeholder="Tax Number 2"
                            formControlName="taxTwo">
                        <div
                            *ngIf="general.controls['taxTwo'].touched && general.controls['taxTwo'].touched && general.controls['taxTwo'].hasError('required') && !isSubmitted">
                            <p class="error-message">Tax No 2 is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['taxTwo'].hasError('required')">
                            <p class="error-message">Tax No 2 is required</p>
                        </div>
                    </div>
                    <div class="col-6 py-1">

                        <label for="">VAT Reg No <sup>*</sup></label>
                        <input type="text" class="form-control mb-3" placeholder="Vat " formControlName="vatReg">
                        <div
                            *ngIf="general.controls['vatReg'].touched && general.controls['vatReg'].touched && general.controls['vatReg'].hasError('required') && !isSubmitted">
                            <p class="error-message">VAT is required</p>
                        </div>
                        <div *ngIf="isSubmitted && general.controls['vatReg'].hasError('required')">
                            <p class="error-message">VAT is required</p>
                        </div>
                    </div>
                </div>



                <div class="row border mt-2">
                    <div class="col-12 ">

                        <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
                            <div class="row">
                                <div class="col-12">
                                    <mat-tab label="Financial Data">
                                        <div class="col-12 d-flex justify-content-end py-2">
                                            <button type="button" class="btn btn-primary" (click)="addPlant()"
                                                style="color: white;background-color: #00acff;">Add Financial</button>
                                        </div>


                                        <div class="table-responsive">
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th *ngIf="detail.controls.length > 1">Actions</th>
                                                        <th>Currency</th>
                                                        <th>Terms Of Payment</th>
                                                        <th>Company Code</th>
                                                        <th>Reconciliation acct</th>
                                                        <th>Tax classification- Tax 1</th>
                                                        <th>Tax classification- Tax 2</th>
                                                        <th>Tax classification- Tax 3</th>
                                                        <th>Tax classification- Tax 4</th>
                                                        <th>Tax classification- Tax 5</th>
                                                    </tr>
                                                </thead>

                                                <tbody formArrayName="plantList">
                                                    <tr *ngFor="let financial of detail.controls; let i = index;"
                                                        [formGroupName]="i">
                                                        <td *ngIf="detail.controls.length > 1">
                                                            <mat-icon style="cursor:pointer"
                                                                (click)="deleterow(i)">delete</mat-icon>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="currency">

                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                            
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="termOfPayment">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="companyCode">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="reconciliation">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="tax1">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="tax2">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="tax3">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="tax4">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="tax5">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </mat-tab>

                                    <mat-tab label="Sales Data">
                                        <div class="col-12 d-flex justify-content-end py-2">
                                            <button type="button" class="btn btn-primary" (click)="addSec()"
                                                style="color: white;background-color: #00acff;">Add Sales</button>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th *ngIf="salesDetail.controls.length > 1">Actions</th>
                                                        <th>Billing Block</th>
                                                        <th>Working Time</th>
                                                        <th>Account Group</th>
                                                        <th>Deletion Flag</th>
                                                        <th>Delievery Block</th>
                                                        <th>Sales Organization</th>
                                                        <th>Distribution Channel</th>
                                                        <th>Division</th>
                                                        <th>Customer group</th>
                                                        <th>Mode of transport</th>
                                                        <th>Acct Assmt Grp Cust.</th>
                                                        <th>Delivery Plant</th>
                                                        <th>Partial Delivery allowed</th>
                                                    </tr>
                                                </thead>

                                                <tbody formArrayName="salesList">
                                                    <tr *ngFor="let financial of salesDetail.controls; let j = index;"
                                                        [formGroupName]="j">
                                                        <td *ngIf="salesDetail.controls.length > 1">
                                                            <mat-icon style="cursor:pointer"
                                                                (click)="deleteSalesrow(j)">delete</mat-icon>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="billingBlock">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="workingTime">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="accountGroup">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <input type="checkbox" class="form-control mb-3"
                                                                formControlName="deletionFlag">
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="deliveryBlock">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>

                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="salesOrg">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="distributionChannel">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="division">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="customerGroup">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="modeOfTransport">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="acctAsmt">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-select mb-3"
                                                                aria-label="Default select example"
                                                                formControlName="deliveryPlant">
                                                                <option value="1">One</option>
                                                                <option value="2">Two</option>
                                                                <option value="3">Three</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <input type="checkbox" class="form-control mb-3"
                                                                formControlName="partial">
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                    </mat-tab>
                                </div>
                            </div>
                        </mat-tab-group>

                    </div>
                </div>
                <div class="row">
                    <div class="col-12 d-flex justify-content-end py-2">
                        <button type="submit" class="btn btn-primary"
                            style="background-color: #00acff;color: white;">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

</div>