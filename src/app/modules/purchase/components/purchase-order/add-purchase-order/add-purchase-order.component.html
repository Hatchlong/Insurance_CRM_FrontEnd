<div class="container-fluid">
    <form [formGroup]="purchase" (ngSubmit)="addCode()">
        <h2><mat-icon class="back" routerLink="/purchase/purchase-order-list">arrow_back</mat-icon>Purchase Order
            Maintainence</h2>
        <div class="row">
            <div class="col-6">
                <label for="" class="">PO Type <sup>*</sup></label>
                <select class="form-select " aria-label="Default select example" formControlName="poType">
                    <option selected>PO Type</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            
                <div *ngIf="purchase.controls['poType'].touched && purchase.controls['poType'].touched && purchase.controls['poType'].hasError('required') && !isSubmitted">
                    <p class="error-message">PO Type is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['poType'].hasError('required')">
                <p class="error-message">PO Type is required</p>
                </div>
            </div>

            <div class="col-6">
                <label for="" class="">PO Number <sup>*</sup></label>
                <input type="text" class="form-control " placeholder="Enter PO Number" formControlName="poNumber">
            
                <div *ngIf="purchase.controls['poNumber'].touched && purchase.controls['poNumber'].touched && purchase.controls['poNumber'].hasError('required') && !isSubmitted">
                    <p class="error-message">PO Number is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['poNumber'].hasError('required')">
                    <p class="error-message">PO Number is required</p>
                </div>
            </div>

            <div class="col-6">
                <label for="" class="">PO Date <sup>*</sup></label>
                <input type="date" class="form-control " placeholder="Enter Description" formControlName="poDate">

                <div *ngIf="purchase.controls['poDate'].touched && purchase.controls['poDate'].touched && purchase.controls['poDate'].hasError('required') && !isSubmitted">
                    <p class="error-message">PO Date is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['poDate'].hasError('required')">
                    <p class="error-message">PO Date is required</p>
                </div>

            </div>

            <div class="col-6">
                <label for="" class="">Company Code <sup>*</sup></label>
                <select class="form-select " aria-label="Default select example" formControlName="companyCode">
                    <option selected>Company Code</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>

                <div *ngIf="purchase.controls['companyCode'].touched && purchase.controls['companyCode'].touched && purchase.controls['companyCode'].hasError('required') && !isSubmitted">
                    <p class="error-message">Comapny Code is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['companyCode'].hasError('required')">
                    <p class="error-message">Comapny Code  is required</p>
                </div>

            </div>

            <div class="col-6">
            
                <label for="" class="">Purchase Org <sup>*</sup></label>
                <select class="form-select " aria-label="Default select example" formControlName="purchaseOrg">
                    <option selected>Purchase Org</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>

                <div *ngIf="purchase.controls['purchaseOrg'].touched && purchase.controls['purchaseOrg'].touched && purchase.controls['purchaseOrg'].hasError('required') && !isSubmitted">
                    <p class="error-message">Purchase Org is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['purchaseOrg'].hasError('required')">
                    <p class="error-message">Purchase Org  is required</p>
                </div>

            </div>

            <div class="col-6">
                <label for="" class="">Payment Term <sup>*</sup></label>
                <select class="form-select " aria-label="Default select example" formControlName="paymentTerm">
                    <option selected>Payment Term</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>

                <div *ngIf="purchase.controls['paymentTerm'].touched && purchase.controls['paymentTerm'].touched && purchase.controls['paymentTerm'].hasError('required') && !isSubmitted">
                    <p class="error-message">Payment Term is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['paymentTerm'].hasError('required')">
                    <p class="error-message">Payment Term  is required</p>
                </div>

            </div>    

            <div class="col-6">
                <label for="" class="">Vendor <sup>*</sup></label>
                <select class="form-select " aria-label="Default select example" formControlName="vendor">
                    <option selected>Vendor</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>

                <div *ngIf="purchase.controls['vendor'].touched && purchase.controls['vendor'].touched && purchase.controls['vendor'].hasError('required') && !isSubmitted">
                    <p class="error-message">vendor is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['vendor'].hasError('required')">
                    <p class="error-message">vendo is required</p>
                </div>

            </div>
               

            <div class="col-6">
                <label for="" class="">Net Tax <sup>*</sup></label>
                <input type="text" class="form-control " placeholder="Enter Net Tax" formControlName="netTax">

                <div *ngIf="purchase.controls['netTax'].touched && purchase.controls['netTax'].touched && purchase.controls['netTax'].hasError('required') && !isSubmitted">
                    <p class="error-message">Net Tax is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['netTax'].hasError('required')">
                <p class="error-message">Net Tax is required</p>
                </div>
            </div>

            <div class="col-6">
                <label for="" class="">Transaction Currency <sup>*</sup></label>
                <select class="form-select " aria-label="Default select example" formControlName="transactionCurrency">
                    <option selected>Transaction Currency</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>

                <div *ngIf="purchase.controls['transactionCurrency'].touched && purchase.controls['transactionCurrency'].touched && purchase.controls['transactionCurrency'].hasError('required') && !isSubmitted">
                    <p class="error-message">vendor is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['transactionCurrency'].hasError('required')">
                    <p class="error-message">vendo is required</p>
                </div>

            </div>

            <div class="col-6">
            
                <label for="" class="">Exchange Rate<sup>*</sup></label>
                <input type="text" class="form-control " placeholder="Enter Exchange Rate" formControlName="exchangeRate">

                <div *ngIf="purchase.controls['exchangeRate'].touched && purchase.controls['exchangeRate'].touched && purchase.controls['exchangeRate'].hasError('required') && !isSubmitted">
                    <p class="error-message">Exchange Rate is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['exchangeRate'].hasError('required')">
                    <p class="error-message">Exchange Rate is required</p>
                </div>

            </div>

            <div class="col-6">

                <label for="" class="">Company Currency <sup>*</sup></label>
                <input type="text" class="form-control " placeholder="Enter Company Currency"
                    formControlName="companyCurrency">

                    <div *ngIf="purchase.controls['companyCurrency'].touched && purchase.controls['companyCurrency'].touched && purchase.controls['companyCurrency'].hasError('required') && !isSubmitted">
                        <p class="error-message">Company Currency is required</p>
                    </div>
                    <div *ngIf="isSubmitted && purchase.controls['companyCurrency'].hasError('required')">
                        <p class="error-message">Company Currency is required</p>
                    </div>

            </div>

            <div class="col-6">

                <label for="" class="">Remark <sup>*</sup></label>
                <input type="text" class="form-control " placeholder="Enter Remark" formControlName="remark">

                <div *ngIf="purchase.controls['remark'].touched && purchase.controls['remark'].touched && purchase.controls['remark'].hasError('required') && !isSubmitted">
                    <p class="error-message">Remark is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['remark'].hasError('required')">
                    <p class="error-message">Remark is required</p>
                </div>

            </div>

            <div class="col-6">

                <label for="" class="">Net Price <sup>*</sup></label>
                <input type="text" class="form-control " placeholder="Enter Net Price" formControlName="netPrice">

                <div *ngIf="purchase.controls['netPrice'].touched && purchase.controls['netPrice'].touched && purchase.controls['netPrice'].hasError('required') && !isSubmitted">
                    <p class="error-message">net Price is required</p>
                </div>
                <div *ngIf="isSubmitted && purchase.controls['netPrice'].hasError('required')">
                    <p class="error-message">Net Price is required</p>
                </div>


            </div>
        </div>
        <h2>Item Data</h2>
        <div class="row">
            <div class="col-12 d-flex justify-content-end">
                <button type="button" class="btn btn-primary m-1" (click)="addItem()"
                    style="color: white;background-color: #00acff;">Add Item</button>
            </div>
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th *ngIf="detail.controls.length > 1">Actions</th>
                            <th>Delievery Address <sup>*</sup></th>
                            <th>Product Code</th>
                            <th>Product Description</th>
                            <th>PO Qty</th>
                            <th>UOM</th>
                            <th>Per Unit Price</th>
                            <th>Pricing Unit</th>
                            <th>Pricing UOM</th>
                            <th>Pricing Amount</th>
                        </tr>
                    </thead>

                    <tbody formArrayName="itemList">
                        <tr *ngFor="let pruchaseOrder of detail.controls; let i = index;" [formGroupName]="i">
                            <td *ngIf="detail.controls.length > 1">
                                <mat-icon style="cursor:pointer" (click)="deleterow(i)">delete</mat-icon>
                            </td>
                            <td>
                                <select class="form-select " aria-label="Default select example"
                                    formControlName="deliveryAddress">
                                    <option selected>Default Delievery Address</option>
                                    <option value="1">One</option>
                                    <option value="2">Two</option>
                                    <option value="3">Three</option>
                                </select>
                                
                <div *ngIf="purchase.controls['deliveryAddress'].touched && purchase.controls['deliveryAddress'].touched && purchase.controls['deliveryAddress'].hasError('required') && !isSubmitted">
                    <p class="error-message">Delivery Address is required</p>
                </div>  
                <div *ngIf="isSubmitted && purchase.controls['deliveryAddress'].hasError('required')">
                    <p class="error-message">Delivery Address is required</p>
                </div>
                            </td>
                            <td>
                                <select class="form-select " aria-label="Default select example"
                                    formControlName="productCode">
                                    <option selected>Product Code</option>
                                    <option value="1">One</option>
                                    <option value="2">Two</option>
                                    <option value="3">Three</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" class="form-control " placeholder="Enter Product Description"
                                    formControlName="productDescription">
                            </td>
                            <td>
                                <input type="number" class="form-control " placeholder="Enter PO Qty"
                                    formControlName="poQty">
                            </td>
                            <td>
                                <select class="form-select " aria-label="Default select example"
                                    formControlName="uom">
                                    <option selected>UOM</option>
                                    <option value="1">One</option>
                                    <option value="2">Two</option>
                                    <option value="3">Three</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" class="form-control " placeholder="Enter Per Unit Price"
                                    formControlName="perUnitPrice">
                            </td>
                            <td>
                                <input type="text" class="form-control " placeholder="Enter Pricing Unit"
                                    formControlName="priceUnit">
                            </td>
                            <td>
                                <input type="text" class="form-control " placeholder="Enter Pricing UOM"
                                    formControlName="priceUom">
                            </td>
                            <td>
                                <input type="text" class="form-control " placeholder="Enter Pricing Amount"
                                    formControlName="priceAmount">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
        <div class="col-2">
            <button type="submit" class="btn btn-primary" style="background-color: #00acff;">Submit</button>
        </div>
    </form>
</div>